# Android Camera Server

HTTP-—Å–µ—Ä–≤–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä–æ–π Android-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ñ–æ—Ç–æ–±—É–¥–∫–∞—Ö –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö —Å—ä—ë–º–∫–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **MJPEG —Å—Ç—Ä–∏–º–∏–Ω–≥** - –∂–∏–≤–æ–µ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ HTTP
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –Ω–∞ –ª–µ—Ç—É** - —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ, FPS, –∫–∞—á–µ—Å—Ç–≤–æ JPEG
- **–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –∞–≤—Ç–æ—Ñ–æ–∫—É—Å** - CONTINUOUS_VIDEO –¥–ª—è —Å—Ç—Ä–∏–º–∞, CONTINUOUS_PICTURE –¥–ª—è —Ñ–æ—Ç–æ
- **–§–æ—Ç–æ** - –±—ã—Å—Ç—Ä–æ–µ (–∏–∑ —Å—Ç—Ä–∏–º–∞) –∏ –ø–æ–ª–Ω–æ—Ä–∞–∑–º–µ—Ä–Ω–æ–µ (4080x3072)
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å—Ç—Ä–∏–º–∞** - —Ñ–æ—Ç–æ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç—Ä–∏–º (session recreation approach)
- **Web UI** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
- **Foreground Service** - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ —Ñ–æ–Ω–µ
- **Auto-recovery** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö
- **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–≥—Ä–µ–≤–∞** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ

## –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### v1.2.0 - Full Resolution Photo Fix
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å full resolution —Ñ–æ—Ç–æ** - —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ (–±—ã–ª–æ 1/10, —Å—Ç–∞–ª–æ 10/10)
- ‚úÖ **Session recreation –ø–æ–¥—Ö–æ–¥** - —Å—Ç—Ä–∏–º –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –∫–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–∞–¥—Ä (~600ms)
- ‚úÖ **–£–¥–∞–ª–µ–Ω —Ä—É—á–Ω–æ–π —Ñ–æ–∫—É—Å** - —Ç–æ–ª—å–∫–æ continuous autofocus –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ **HTTP 429 –¥–ª—è concurrent requests** - –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–∞–π–º–∞—É—Ç—ã** - watchdog timeout —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ FPS
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –≤—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ CameraConfig
- ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** - —Å—Ç—Ä–∏–º –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Ñ–æ—Ç–æ
- üìä **–°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ (221 –∑–∞–ø—Ä–æ—Å, 100% —É—Å–ø–µ—Ö)
- üîß **Device Owner —Å–∫—Ä–∏–ø—Ç—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–∞—á–∞–π—Ç–µ APK –∏–∑ [Releases](https://github.com/kirashergin/android-camera-server/releases)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
3. –î–∞–π—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –∫–∞–º–µ—Ä—É
4. –û—Ç–∫–ª—é—á–∏—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –±–∞—Ç–∞—Ä–µ–∏ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### –ß–µ—Ä–µ–∑ USB (ADB)
```bash
adb forward tcp:8080 tcp:8080
# –û—Ç–∫—Ä—ã—Ç—å http://localhost:8080
```

### –ß–µ—Ä–µ–∑ Wi-Fi
–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏:
```
http://<IP-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞>:8080
```

## API Endpoints

### –°—Ç–∞—Ç—É—Å
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞ |
| GET | `/status` | –ü–æ–ª–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∫–∞–º–µ—Ä—ã –∏ —Å–µ—Ä–≤–µ—Ä–∞ |

### –°—Ç—Ä–∏–º
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/stream/start` | –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ç—Ä–∏–º |
| POST | `/stream/stop` | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∏–º |
| GET | `/stream/mjpeg` | MJPEG –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ |
| GET | `/stream/frame` | –û–¥–∏–Ω –∫–∞–¥—Ä (JPEG) |
| GET | `/stream/config` | –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| POST | `/stream/config` | –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |

### –§–æ—Ç–æ
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/photo` | –ü–æ–ª–Ω–æ—Ä–∞–∑–º–µ—Ä–Ω–æ–µ —Ñ–æ—Ç–æ (4080x3072, ~1MB) |
| POST | `/photo/quick` | –ë—ã—Å—Ç—Ä–æ–µ —Ñ–æ—Ç–æ –∏–∑ —Å—Ç—Ä–∏–º–∞ (—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å—Ç—Ä–∏–º–∞) |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: `/photo` –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç —Å–µ—Å—Å–∏—é –∫–∞–º–µ—Ä—ã (~600ms), –∫–ª–∏–µ–Ω—Ç –≤–∏–¥–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–∞–¥—Ä —Å—Ç—Ä–∏–º–∞. –°—Ç—Ä–∏–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å—ä–µ–º–∫–∏. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç HTTP 429.

### Device Owner
| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/device-owner` | –°—Ç–∞—Ç—É—Å Device Owner |
| POST | `/device-owner/reboot` | –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ |

## Device Owner Mode

Device Owner ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º Android, –¥–∞—é—â–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ —Ä–µ–∂–∏–º–µ –∫–∏–æ—Å–∫–∞/—Ñ–æ—Ç–æ–±—É–¥–∫–∏.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –ó–∞–ø—É—Å–∫ Foreground Service –∏–∑ —Ñ–æ–Ω–∞ (–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π Android 12+)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ API
- –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Device Owner

**–í–∞–∂–Ω–æ:** –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–±—Ä–æ—à–µ–Ω–æ –¥–æ –∑–∞–≤–æ–¥—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–ª–∏ –Ω–µ –∏–º–µ—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ Google.

**–ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (Windows):**
```bash
setup_device_owner.bat
```

**–†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
adb install app-release.apk

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –¥–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (–í–ê–ñ–ù–û!)
# –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ

# 3. –ù–∞–∑–Ω–∞—á–∏—Ç—å Device Owner
adb shell dpm set-device-owner com.cameraserver.usb/.admin.CameraDeviceAdminReceiver

# 4. –î–∞—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ CAMERA —á–µ—Ä–µ–∑ ADB (–µ—Å–ª–∏ –Ω–µ –¥–∞–ª–∏ —á–µ—Ä–µ–∑ UI)
adb shell pm grant com.cameraserver.usb android.permission.CAMERA
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
```bash
check_device_owner.bat
# –∏–ª–∏
adb shell dumpsys device_policy | grep "Device Owner"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
curl http://localhost:8080/device-owner
```

–û—Ç–≤–µ—Ç:
```json
{
  "isDeviceOwner": true,
  "isDeviceAdmin": true,
  "canStartFgsFromBackground": true
}
```

### –£–¥–∞–ª–µ–Ω–∏–µ Device Owner
```bash
adb shell dpm remove-active-admin com.cameraserver.usb/.admin.DeviceAdminReceiver
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ó–∞–ø—É—Å–∫ —Å—Ç—Ä–∏–º–∞
```bash
curl -X POST http://localhost:8080/stream/start
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
```bash
curl -X POST http://localhost:8080/stream/config \
  -H "Content-Type: application/json" \
  -d '{"width": 1920, "height": 1080, "fps": 30, "quality": 80}'
```

### –°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ
```bash
# –ë—ã—Å—Ç—Ä–æ–µ —Ñ–æ—Ç–æ (–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç—Ä–∏–º–∞)
curl -X POST http://localhost:8080/photo/quick -o photo.jpg

# –ü–æ–ª–Ω–æ—Ä–∞–∑–º–µ—Ä–Ω–æ–µ —Ñ–æ—Ç–æ
curl -X POST http://localhost:8080/photo -o photo_full.jpg
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä–∏–º–∞ –≤ VLC
```
vlc http://localhost:8080/stream/mjpeg
```

## Web UI

–û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:8080` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É:

- –ü—Ä–æ—Å–º–æ—Ç—Ä –∂–∏–≤–æ–≥–æ –≤–∏–¥–µ–æ (MJPEG stream)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∏–º–æ–º (Start/Stop)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è, FPS, –∫–∞—á–µ—Å—Ç–≤–∞ JPEG
- –°—ä—ë–º–∫–∞ —Ñ–æ—Ç–æ (Quick –∏ Full resolution)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ –∫–∞–º–µ—Ä—ã –∏ —Å–µ—Ä–≤–µ—Ä–∞
- Device Owner —Å—Ç–∞—Ç—É—Å (–µ—Å–ª–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω)

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ `CameraConfig.kt`:

```kotlin
const val SERVER_PORT = 8080
var streamWidth = 1280
var streamHeight = 720
var targetFps = 30
var jpegQuality = 80
const val PHOTO_QUALITY = 95

// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–∞–π–º–∞—É—Ç—ã (–∑–∞–≤–∏—Å—è—Ç –æ—Ç FPS)
val watchdogStreamTimeoutMs: Long
    get() = (frameIntervalMs * WATCHDOG_STREAM_MISSED_FRAMES)
            .coerceAtLeast(WATCHDOG_STREAM_TIMEOUT_MIN_MS)

// –¢–µ–ø–ª–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
const val TEMP_WARNING = 400   // 40¬∞C
const val TEMP_HIGH = 450       // 45¬∞C
const val TEMP_CRITICAL = 500   // 50¬∞C
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è:**
- Watchdog timeout —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ FPS
- –ö–∞—á–µ—Å—Ç–≤–æ JPEG —Å–Ω–∏–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–≥—Ä–µ–≤–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø–æ–¥–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –∫–∞–º–µ—Ä–æ–π

## –°–±–æ—Ä–∫–∞

```bash
# Debug
./gradlew assembleDebug

# Release
./gradlew assembleRelease
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã

–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞:

```bash
# Windows
run_tests.bat

# Linux/Mac
adb forward tcp:8080 tcp:8080
python test_stress.py
```

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:**
- 50 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö /status –∑–∞–ø—Ä–æ—Å–æ–≤
- 30 —Å–º–µ—à–∞–Ω–Ω—ã—Ö GET –∑–∞–ø—Ä–æ—Å–æ–≤
- 10 –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- 20 quick photo –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º —Å—Ç—Ä–∏–º–µ
- 10 full resolution photo (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∏–º–∞)
- 100 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (—ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞)

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- 100% —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –°—Ç—Ä–∏–º –æ—Å—Ç–∞–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º –ø–æ—Å–ª–µ full resolution —Ñ–æ—Ç–æ
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ < 0.1s
- –ù–µ—Ç HTTP 503/500 –æ—à–∏–±–æ–∫

### Selenium —Ç–µ—Å—Ç—ã

```bash
python test_selenium.py
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Android 7.0+ (API 24+)
- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –∫–∞–º–µ—Ä—É
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Ç–∫–ª—é—á–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –±–∞—Ç–∞—Ä–µ–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îú‚îÄ‚îÄ CameraService         # Foreground Service
‚îú‚îÄ‚îÄ CameraController      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Camera2 API
‚îÇ   ‚îú‚îÄ‚îÄ Session recreation –¥–ª—è full resolution —Ñ–æ—Ç–æ
‚îÇ   ‚îú‚îÄ‚îÄ –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –∞–≤—Ç–æ—Ñ–æ–∫—É—Å (CONTINUOUS)
‚îÇ   ‚îî‚îÄ‚îÄ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ CameraHttpServer      # HTTP —Å–µ—Ä–≤–µ—Ä (NanoHTTPD)
‚îÇ   ‚îú‚îÄ‚îÄ MJPEG streaming —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥–∏ –∫–∞–¥—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ HTTP 429 –¥–ª—è concurrent requests
‚îÇ   ‚îî‚îÄ‚îÄ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Web UI
‚îú‚îÄ‚îÄ CameraConfig          # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–∞–π–º–∞—É—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ –¢–µ–ø–ª–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
‚îî‚îÄ‚îÄ Reliability           # –ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
    ‚îú‚îÄ‚îÄ SystemWatchdog    # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–∏—Å–∞–Ω–∏–π
    ‚îú‚îÄ‚îÄ CameraRecoveryManager # –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ DeviceHealthMonitor # –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞/–±–∞—Ç–∞—Ä–µ—è
    ‚îî‚îÄ‚îÄ ServiceGuard      # –ó–∞—â–∏—Ç–∞ –æ—Ç –∫—Ä–∞—à-—Ü–∏–∫–ª–æ–≤
```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **Recreate session approach**: –ü–æ–ª–Ω–æ–µ —Ñ–æ—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç dual-surface, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç —Å–µ—Å—Å–∏—é –∫–∞–º–µ—Ä—ã
- **Thread safety**: AtomicBoolean –¥–ª—è —Ñ–ª–∞–≥–æ–≤, Semaphore –¥–ª—è –∫–∞–º–µ—Ä—ã, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏
- **Exponential backoff**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ 500ms ‚Üí 1s ‚Üí 2s ‚Üí 5s
- **Per-client queues**: –ö–∞–∂–¥—ã–π MJPEG –∫–ª–∏–µ–Ω—Ç –∏–º–µ–µ—Ç —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –∫–∞–¥—Ä–æ–≤

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
